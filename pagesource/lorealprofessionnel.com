<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dispatch Page</title>
    
<meta name="description" content="">
    <meta name="keywords" content="">
    

	<meta property="og:url" content="http://lorealproww2.cloudapp.net/" />
	<meta property="og:title" content="Dispatch Page" />
<meta property="og:type" content="website" />
    

    <link href="https://fonts.googleapis.com/css?family=Raleway:400,700%7CDroid+Serif:400,400italic,700,700italic%7CHomemade+Apple" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" href="/assets/css/styles.min.css" />
    

    <!--[if lt IE 9]>
        <link href="/bundles/ie-css?v=jRnpLSuzJ6qsfarZop4JKUhTrLmXU-Xsjujy86bET941" rel="stylesheet"/>

        <script src="/bundles/ie-js?v=YesfI2pUGVULUXXJM_HPeyCs4IAqEMMYVSKd94-G1101"></script>

    <![endif]-->
    <link rel="icon" type="image/vnd.microsoft.icon" href="/favicon.ico" />
    

    

</head>
<body class="dispatchpage" data-context-item="{776473EB-B9FD-480E-AAD3-80F2DE27F5EC}" data-context-lang="en" data-context-db="web">
    <div id="page">
        


        


        
        

	<!-- Main header -->
	<header class="site-hd">
		<div class="wrap">
            <p class="logo">L&#39;Or&#233;al Professionnel Dispatch Site</p>
			<span class="clear"></span>
		</div>
	</header>
	<!-- / Main header -->

        
<div class="site-main">
    
    

		<style type="text/css" scoped>
			.stage {background-image: url('/-/media/master/dispatch/dispach_colorfulhair.ashx?w=380&hash=84662540A9DCF3F1E97E0AB175FB26BF6E0C2643')}
			@media only screen and (-webkit-min-device-pixel-ratio: 2) and (min-width: 320px), only screen and ( min--moz-device-pixel-ratio: 2) and (min-width: 320px), only screen and ( -o-min-device-pixel-ratio: 2/1) and (min-width: 320px), only screen and ( min-device-pixel-ratio: 2) and (min-width: 320px), only screen and ( min-resolution: 192dpi) and (min-width: 320px), only screen and ( min-resolution: 2dppx) and (min-width: 320px) { 
				.stage {background-image: url('/-/media/master/dispatch/dispach_colorfulhair.ashx?w=760&hash=6CE965876C6583D7EAF5F245751F2B6118C21F4C')}
			}
			@media screen and (min-width: 768px) {
				.stage {background-image: url('/-/media/master/dispatch/dispach_colorfulhair.ashx?w=500&hash=AF15FBBE0745D08E61A536F109E145C1C23A9F8C')}
			}
			@media only screen and (-webkit-min-device-pixel-ratio: 2) and (min-width: 768px), only screen and ( min--moz-device-pixel-ratio: 2) and (min-width: 768px), only screen and ( -o-min-device-pixel-ratio: 2/1) and (min-width: 768px), only screen and ( min-device-pixel-ratio: 2) and (min-width: 768px), only screen and ( min-resolution: 192dpi) and (min-width: 768px), only screen and ( min-resolution: 2dppx) and (min-width: 768px) { 
				.stage {background-image: url('/-/media/master/dispatch/dispach_colorfulhair.ashx?w=1000&hash=391011F73D014C0A52DFB381BB6B3493A5B8CCC3')}
			}
			@media screen and (min-width: 1024px) {
				.stage {background-image: url('/-/media/master/dispatch/dispach_colorfulhair.ashx?w=600&hash=E23FF74C09C2B17A1323EE7C2EEC7167EFBAB5BD')}
			}
			@media only screen and (-webkit-min-device-pixel-ratio: 2) and (min-width: 1024px), only screen and ( min--moz-device-pixel-ratio: 2) and (min-width: 1024px), only screen and ( -o-min-device-pixel-ratio: 2/1) and (min-width: 1024px), only screen and ( min-device-pixel-ratio: 2) and (min-width: 1024px), only screen and ( min-resolution: 192dpi) and (min-width: 1024px), only screen and ( min-resolution: 2dppx) and (min-width: 1024px) { 
				.stage {background-image: url('/-/media/master/dispatch/dispach_colorfulhair.ashx?w=1200&hash=91A8EEB42C3B18DD11B93FD6125AD454045461B4')}
			}
            @media screen and (min-width: 1240px) {
            	.stage {background-image: url('/-/media/master/dispatch/dispach_colorfulhair.ashx?w=780&hash=9B86427B8AE35F70B5D600C300FD2DBE3D395BB8')}
            }
            @media screen and (min-width: 1600px) {
            	.stage {background-image: url('/-/media/master/dispatch/dispach_colorfulhair.ashx?w=1200&hash=91A8EEB42C3B18DD11B93FD6125AD454045461B4')}
            }
		</style>
		<section class="stage stage-dispatch">
			<div class="wrap">
				<div class="skew-wrapper">
					<span class="repere"></span><div class="content">
						<p class="surtitle">Welcome on L&#39;Or&#233;al Professionnel</p>
						<h1>Choose your website</h1>
					</div>
				</div>
			</div>
		</section>
		<section class="dispatch">
			<div class="wrap">
			    <ul class="small-accordion">
			        
                        <li>
                            <h2 class="accordion-hd">International</h2>
                            <ul class="accordion-ctt">
                                <li><a href="http://www.lorealprofessionnel.com/int/">International Website</a></li>
                            </ul>
                        </li>
                        <li>
                            <h2 class="accordion-hd">Europe</h2>
                            <ul class="accordion-ctt">
                                <li><a href="http://lorealprofessionnel.fr/">France</a></li>
                                <li><a href="http://lorealprofessionnel.co.uk/">UK & Eire</a></li>
                                <li><a href="http://lorealprofessionnel.it/">Italy</a></li>
                                <li><a href="http://lorealprofessionnel.es/">Spain</a></li>
                                <li><a href="http://lorealprofessionnel.de/">Germany</a></li>
                                <li><a href="http://lorealprofessionnel.pt/">Portugal</a></li>
                                <li><a href="http://lorealprofessionnel.be">Belgium</a></li>
                                <li><a href="http://www.lorealprofessionnel.ch">Switzerland</a></li>
                                <li><a href="http://lorealprofessionnel.nl/">Netherlands</a></li>
                                <li><a href="http://lorealprofessionnel.pl/">Poland</a></li>
                                <li><a href="http://www.lorealprofessionnel.com.tr/">Turkey</a></li>
                                <li><a href="http://lorealprofessionnel.ru/">Russia</a></li>
                                <li><a href="http://lorealprofessionnel.gr/">Greece</a></li>
                                <li><a href="http://www.lorealprofessionnel.fi" alt="Finland">Finland</a></li>
                                <li><a href="http://www.lorealprofessionnel.se" alt="Sweden">Sweden</a></li>
                                <li><a href="http://www.lorealprofessionnel.dk" alt="Denmark">Denmark</a></li>
                                <li><a href="http://www.lorealprofessionnel.no" alt="Norway">Norway</a></li>
                            </ul>
                        </li>
                        <li>
                            <h2 class="accordion-hd">Americas</h2>
                            <ul class="accordion-ctt">
                                <li><a href="http://us.lorealprofessionnel.com/">United-States</a></li>
                                <li><a href="http://en.lorealprofessionnel.ca/">Canada</a></li>
                                <li><a href="http://zal.lorealprofessionnel.com/">Latin America</a></li>
                                <li><a href="http://lorealprofessionnel.com.br/">Brazil</a></li>
                            </ul>
                        </li>
                        <li>
                            <h2 class="accordion-hd">Africa</h2>
                            <ul class="accordion-ctt">
                                <li><a href="http://www.lorealprofessionnel-me.com/me-ar">Africa Middle East Website</a></li>
                            </ul>
                        </li>
                        <li>
                            <h2 class="accordion-hd">Asia</h2>
                            <ul class="accordion-ctt">
                                <li><a href="http://www.lorealprofessionnel.in/">India</a></li>
                                <li><a href="http://www.lorealprofessionnel.com.au/">Australia</a></li>
                                <li><a href="http://www.lorealprofessionnel.cn/">China</a></li>
                                <li><a href="http://www.loreal-professionnel.jp/top.html">Japan</a></li>
                            </ul>
                        </li>
                        <li>
                            <h2 class="accordion-hd">Lâ€™Or&#233;al Professionnel Institutes</h2>
                            <ul class="accordion-ctt">
                                <li><a href="http://www.lorealinstitute.co.za/">South Africa</a></li>
                                <li><a href="http://www.institutoloreal.com.br/">Brazil</a></li>
                            </ul>
                        </li>

			    </ul>
			</div>

		</section>
    
    
</div>
        


    </div>
    <div class="popin"></div>
    



    <div id="fb-root"></div>
    <script type="text/javascript" src="/assets/js/loreal_pro_main.min.js"></script>
    <script type="text/javascript">
        /* All variables */
            
    window.getCookie = function (name) {
        match = document.cookie.match(new RegExp(name + '=([^;]+)'));
        if (match) return match[1].split('2.')[1];
    }

        var $pageSection = 'Dispatch Page';
        var $productPageSection = '';
        var $productCategory = ''; /*on product pages*/
        var $productName = ''; /*on product pages*/
        var $productSku = ''; /*on product pages*/
        var $language = 'en';
        var $country = 'Dispatch';
        var $cid  = getCookie('_galorealpro');
 

        /* GA tagging */
        /* init dataLayer object  */
        var lang = $language.split('-');
        var dataLayer = [
            {
                'brand': 'LP',
                'language': lang[lang.length - 1],
                'country': $country,
                'siteTypeLevel': 'main',
                'pageCategory': $pageSection,
                'cid': $cid
            }
        ];

        /*Search Results*/
        if (jq('[data-search]').length > 0) {
            var results = jq('[data-search]');
            dataLayer.push({
                'searchCategory': 'internal search',
                'searchKeyword': results.data('search-term'),
                'numberResults': results.data('search-result-count')
            });
        }

        /* GTM main */
        

(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(), event: 'gtm.js'}); var f = d.getElementsByTagName(s)[0],
j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
'//www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
})(window,document,'script','dataLayer','GTM-P3DLX3');

        var productsOnPage = [];
        var promotionsOnPage = [];
        var counter = 0;

        /* Events */
        jq(document).ready(function () {
            /* 1. Events */

            /* Social networks */
            jq('.social a').bind('click',
                function (e) {
                    var network = jq(this).attr('alt');
                    var target = jq(this).attr('href');
                    var category = 'header';
                    if (jq(this).parents("footer").length == 1) category = 'footer';
                    dataLayer.push({
                        'event': 'uaevent',
                        'eventCategory': category,
                        'eventAction': 'social::' + network,
                        'eventLabel': target
                    });
                });

            /* "Buy online" button */
            jq('.retail .button.alt').bind('click',
                function (e) {
                    dataLayer.push({
                        'event': 'uaevent',
                        'eventCategory': 'e-retailer',
                        'eventAction': 'disolay::popin',
                        'eventLabel': 'buy online'
                    });

                    //POP-IN BUY ONLINE generated when user clicks on "buy online" button on a product page
                    setTimeout(function () {
                        if (jq('.popin').is(":visible")) {
                            dataLayer.push({
                                'event': 'updatevirtualpath',
                                'virtualPageURL': '/e-retailer/buy-online',
                                'virtualPageTitle': 'pop-in e-retailer buy online'
                            });

                            jq('.retailers a').on('click',
                                function () {
                                    var storeName = jq(this).attr('href').split('.');
                                    var idProductPrice = jq('.price').text().replace(/\s/g, '').split('.');
                                    //Event : Buy a product
                                    dataLayer.push({
                                        'event': 'uaevent',
                                        'eventCategory': 'e-retailer popin::buy online',
                                        'eventAction': 'redirection::' + storeName[1],
                                        'eventLabel': idProductPrice[0] + '.' + idProductPrice[1].replace(/\D/g, '')
                                    });
                                });
                        };
                    },
                        500);
                });

            //pre booking
            jq('.inside-hfn .button').bind('click,', function () {
                var eventName = document.title;
                dataLayer.push({
                    'event': 'uaevent',
                    'eventCategory': 'event booking',
                    'eventAction': 'click on register to an event',
                    'eventLabel': eventName
                });
            });

            //event PDP or PSP after Conserns
            jq('.editorial a').bind('click',
                function (e) {
                    var targetUrl = jq(this).attr('href');
                    var eventCategory = 'PSP';
                    var splitUrl = targetUrl.split('/');
                    if (splitUrl.length > 4) {
                        eventCategory = 'PDP';
                    }
                    var productName = splitUrl[splitUrl.length - 1];
                    dataLayer.push({
                        'event': 'uaevent',
                        'eventCategory': eventCategory + ' after concerns',
                        'eventAction': 'select::' + productName,
                        'eventLabel': targetUrl
                    });
                });

            //event PDP or PSP after Looks
            jq('.s-cols-6.cols-4 a').bind('click',
                function (e) {
                    var url = window.location.href.toLowerCase();
                    if (url.indexOf("it-looks") > -1 || url.indexOf("it%looks") > -1) {
                        var targetUrl = jq(this).attr('href');
                        var productName = '';
                        var eventCategory = 'PSP';
                        var splitUrl = targetUrl.split('/');
                        if (splitUrl.length > 4) {
                            eventCategory = 'PDP';
                            productName = splitUrl[splitUrl.length - 1];
                        }
                        dataLayer.push({
                            'event': 'uaevent',
                            'eventCategory': eventCategory + ' after it looks',
                            'eventAction': 'select::' + productName,
                            'eventLabel': targetUrl
                        });
                    }
                });

            //promotions
            jq('[data-cta-promotion]').bind('click',
                function () {
                    var link = jq(this).attr('href').split('/');
                    var file = link[link.length - 1];
                    var fileParts = file.split('.');
                    dataLayer.push({
                        'event': 'uaevent',
                        'eventCategory': 'download',
                        'eventAction': fileParts[fileParts.length - 1] == 'pdf' ? 'pdf' : 'coupon',
                        'eventLabel': fileParts[0]
                    });
                });

            //share on social networks
            jq('.sharing a').bind('click',
                function () {
                    var url = jq(this).data('href');
                    var socialnetwork;
                    if (jq(this).hasClass('sharing-fb')) {
                        socialnetwork = 'Facebook'
                    } else {
                        if (jq(this).hasClass('sharing-pi')) {
                            socialnetwork = 'Pinterest'
                        } else {
                            if (jq(this).hasClass('sharing-tw')) {
                                socialnetwork = 'Twitter';
                            }
                        }
                    }
                    dataLayer.push({
                        'event': 'socialInt',
                        'eventCategory': socialnetwork,
                        'eventAction': 'Share',
                        'eventLabel': url
                    });
                });

            /* Salon locator */
            var salonString = '55event=salonLocator&55locationInPage=';
            /* links */
            /* in header, product header and product summary */
            jq('#page header a.localize, #page div.site-main a[data-cta-type=salonLocatorLink]').each(function () {
                var currentHref = jq(this).attr('href'); // current link href
                var
                    pageLocElt =
                        jq(this).closest('[data-page-section]'); // find the nearest parent with a page section attribute
                var pageLocVal = pageLocElt.attr('data-page-section'); // store the value of the page section attribute
                jq(this).attr('href', currentHref + '?' + salonString + pageLocVal); // change the link href with the new value
            });

            //header salon locator
            jq('#page header a.localize, #page div.site-main a[data-cta-type=salonLocatorLink]').bind('click',
                function () {
                    dataLayer.push({
                        'event': 'uaevent',
                        'eventCategory': 'salon locator',
                        'eventAction': 'header',
                        'eventLabel': 'geolocalization'
                    });
                });
            //footer salon locator
            jq('#zip-salon-ft').bind('click',
                function () {
                    dataLayer.push({
                        'event': 'uaevent',
                        'eventCategory': 'salon locator',
                        'eventAction': 'footer',
                        'eventLabel': 'search'
                    });
                });
            //salon locator redirection on product page
            jq('.skew-wrapper .i-locator').bind('click',
                function () {
                    storeLocatorProductAnalitics();
                });
            jq('#protocol .i-locator').bind('click',
                function () {
                    storeLocatorProductAnalitics();
                });
            jq('.retail .button:nth-child(1)').bind('click',
                function () {
                    storeLocatorProductAnalitics();
                });

            function storeLocatorProductAnalitics() {
                dataLayer.push({
                    'event': 'uaevent',
                    'eventCategory': 'salon locator',
                    'eventAction': $pageSection,
                    'eventLabel': 'search'
                });
            }

            //hompage redirection
            jq('.logo').bind('click',
                function () {
                    dataLayer.push({
                        'event': 'uaevent',
                        'eventCategory': 'header',
                        'eventAction': 'homepage redirection',
                        'eventLabel': $pageSection
                    });
                });

            //event menue L1
            jq('.nav-main a.first').bind('click',
                function () {
                    var categoryName = jq(this).contents().get(2).nodeValue.replace(/([a-zA-Z].[a-zA-Z])(?= .)/g, "$1:").replace(/\s/g, '').replace(":", " ");
                    dataLayer.push({
                        'event': 'uaevent',
                        'eventCategory': 'main menu L1',
                        'eventAction': 'select',
                        'eventLabel': categoryName
                    });
                });

            //event menue L2
            jq('.dropdown .column li a').bind('click',
                function () {
                    var categoryName = jq(this).text();
                    dataLayer.push({
                        'event': 'uaevent',
                        'eventCategory': 'main menu L2',
                        'eventAction': 'select',
                        'eventLabel': categoryName
                    });
                });

            //footer toolbox
            jq('.toolbox .button.i-locator').bind('click',
                function () {
                    dataLayer.push({
                        'event': 'uaevent',
                        'eventCategory': 'footer',
                        'eventAction': 'salon locator',
                        'eventLabel': ''
                    });
                });
            jq('.toolbox .stylemyhair .button').bind('click',
                function () {
                    dataLayer.push({
                        'event': 'uaevent',
                        'eventCategory': 'footer',
                        'eventAction': 'style my hair',
                        'eventLabel': ''
                    });
                });
            jq('.toolbox .magazine .button').bind('click',
                function () {
                    dataLayer.push({
                        'event': 'uaevent',
                        'eventCategory': 'footer',
                        'eventAction': 'magazine',
                        'eventLabel': ''
                    });
                });
            jq('.stylemyhair .inline-title').bind('click',
                function () {
                    dataLayer.push({
                        'event': 'uaevent',
                        'eventCategory': 'footer',
                        'eventAction': 'style my hair',
                        'eventLabel': ''
                    });
                });
            jq('.magazine .inline-title').bind('click',
                function () {
                    dataLayer.push({
                        'event': 'uaevent',
                        'eventCategory': 'footer',
                        'eventAction': 'magazine',
                        'eventLabel': ''
                    });
                });



            function getProductListData() {

                if (jq("#product-list .list-items button").eq(counter).length) {
                    var dataUpc = jq("#product-list .list-items button").eq(counter).attr("data-upc");
                    var priceApi = jq("#ProductPriceApi").val();
                    var api = priceApi.replace('{UPC}', '' + dataUpc + '');
                    jq("#product-list .list-items button").eq(counter).next('p').remove();

                    jq.ajax({
                        url: "/api/GetProductPrice/",
                        type: "GET",
                        data: { upcCode: dataUpc, apiUrl: api },
                        async: false,
                        dataType: 'json',
                        success: function (data) {
                            if (data.Succes) {
                                jq("#product-list .list-items button").eq(counter).after(function () {
                                    return "<p style='margin-left: 10px;display:inline-block;'>" + (jq("#ProductPriceApi").attr("data-currency") ? jq("#ProductPriceApi").attr("data-currency") : "$") + " " + data.price + "</p>"
                                });
                            }
                            if (counter < jq("#product-list .list-items button").length) {
                                counter++;
                                getProductListData();
                            }
                        },
                        error: function (data) {
                            console.log("getProductListData Error" + data);
                            if (counter < jq("#product-list .list-items button").length) {
                                counter++;
                                getProductListData();
                            }
                        }
                    })
                }
            }

            function getProductDetailData() {
                if (jq("#productDetailBuyNowBtn").length) {
                    var dataUpc = jq("#productDetailBuyNowBtn").attr("data-upc");
                    var priceApi = jq("#ProductPriceApi").val();
                    var apiURL = priceApi.replace('{UPC}', '' + dataUpc + '');

                    jq.ajax({
                        url: apiURL,
                        dataType: "jsonp",
                        async: true,
                        success: function (data) {
                            jq("#productDetailBuyNowBtn").after(function () {
                                return "<p style='margin-left: 10px;display:inline-block;'>" + (jq("#ProductPriceApi").attr("data-currency") ? jq("#ProductPriceApi").attr("data-currency") : "$") + " " + data.price + "</p>"
                            })
                        },
                        error: function (data) {
                            console.log("getProductDetailData Error" + data)
                        }
                    })
                }
            }
			
			if(jq("#ProductPriceApi").length){
				if (jq("#ProductPriceApi").val().search('{UPC}') !== -1) {              
					counter = 0;
					getProductListData();
					getProductDetailData()
				}
			}

            if (jq('.aside-content')) { //productImpression
                productImpressionOnPage();
                //product detail
                if (jq('.product-content').length > 0) {
                    productDetail(jq('.product-content'));
                }
            }

            jq(window).scroll(function () {
                productImpressionOnPage();
            });

            function productImpressionOnPage() {
                //productImpression
                if (jq('.inner.outline li.column.s-cols-6.cols-4').length > 0) {
                    productImpression(jq('.inner.outline li.column.s-cols-6.cols-4'));
                } else { //productImpression
                    if (jq('#product-list .list-items li.item').length > 0) {
                        productImpression(jq('#product-list .list-items li.item'));
                    }
                }
            }

            jq('.trigger-list.std-link').bind('click',
                function () {
                    productImpression(jq('#product-list .list-items li.item'));
                });

            jq('.nav-main>ul>li').mouseover(function () {
                promotionImpressions(this);
            });

            jq('.inner.outline li.column.s-cols-6.cols-4').bind('click',
                function () {
                    productClick(this);
                });

            jq('#product-list .list-items li.item').bind('click',
                function () {
                    productClick(this);
                });

            function isSameProduct(dlElement, product) {
                for (var j = 0; j < dlElement.length; j++) {
                    if (dlElement[j].id == product.id && dlElement[j].name == product.name) {
                        return true;
                    }
                }
                return false;
            }

            function isSamePromotion(dlElement, promotion) {
                for (var i = 0; i < dlElement.length; i++) {
                    if (dlElement[i].name == promotion.name) {
                        return true;
                    }
                }
                return false;
            }

            //ProductImpression
            function productImpression(products) {
                var productArray = [];
                for (var i = 0; i < products.length; i++) {
                    if (isInViewport(products[i]) == true) {
                        var impression = getProductInfo(products[i]);
                        if (!isSameProduct(productsOnPage, impression)) {
                            productArray.push(impression);
                            productsOnPage.push(impression);
                        }
                    }
                }
                var currencyCode = jq('#productCurrencyCode', products[0]).text();
                if (productArray.length > 0) {
                    dataLayer.push({
                        "event": "uaevent",
                        "eventAction": "Product Impressions",
                        "eventCategory": "Ecommerce",
                        "ecommerce": {
                            "currencyCode": currencyCode,
                            "impressions": productArray
                        }
                    });
                }
				if( typeof(LOCA) !== 'undefined') LOCA.Dialog.refreshEvents();  
            }

            //ProductClick
            function productClick(product) {
                var productInfo = [];
                productInfo.push(getProductInfo(product));

                dataLayer.push({
                    "event": "productClick",
                    "eventAction": "Product Click",
                    "eventCategory": "Ecommerce",
                    "ecommerce": {
                        "click": {
                            "actionField": {
                                "action": "click"
                            },
                            "products": productInfo
                        }
                    }
                });
            }

            //ProductDetail
            function productDetail(product) {
                var productInfo = [];
                productInfo.push(getProductInfo(product));

                dataLayer.push({
                    "event": "uaevent",
                    "eventAction": "Product Detail",
                    "eventCategory": "Ecommerce",
                    "ecommerce": {
                        "detail": {
                            "actionField": {
                                "action": "detail",
                                "list": "product detail page"
                            },
                            "products": productInfo
                        }
                    }
                });
            }

            //promotionClick
            jq('.nav-main>ul>li>.dropdown a').bind('click',
                function () {
                    if (jq('img', this).length > 0) {
                        var alt = jq("img", this).attr('alt');
                        var promotions = jq('.nav-main>ul>li');
                        var i = 0;
                        var found = false;
                        while (promotions[i].className.indexOf('separator') < 0 && !found) {
                            var j = 0;
                            var promoImg = jq("img", promotions[i]);
                            while (j < promoImg.length && jq(promoImg[j]).attr('alt') != alt) {
                                j++;
                            }
                            if (j < promoImg.length) {
                                promotionClick(promoImg[j]);
                                found = true;
                            }
                            i++;
                        }
                    }
                });

            //PromotionClick
            function promotionClick(promotion) {
                var promotionInfo = [];
                promotionInfo.push(getPromotionInfo(promotion));
                dataLayer.push({
                    "event": "promotionClick",
                    "eventAction": "Promotion Click",
                    "eventCategory": "Ecommerce",
                    "ecommerce": {
                        "promoClick": {
                            "promotions": promotionInfo
                        }
                    }
                });
            }

            //PromotionImpressions
            function promotionImpressions(promotions) {
                var promotionArray = [];
                if (promotions.className.indexOf('separator') < 0) {
                    var promotionsInLi = jq('img', promotions);
                    for (var j = 0; j < promotionsInLi.length; j++) {
                        if (isInViewport(promotionsInLi[j])) {
                            var impression = getPromotionInfo(promotionsInLi[j]);
                            if (!isSamePromotion(promotionsOnPage, impression)) {
                                promotionArray.push(impression);
                                promotionsOnPage.push(impression);
                            }
                        }
                    }
                }
                if (promotionArray.length > 0) {
                    dataLayer.push({
                        "event": "uaevent",
                        "eventAction": "Promotion Impressions",
                        "eventCategory": "Ecommerce",
                        "ecommerce": {
                            "promoView": {
                                "promotions": promotionArray
                            }
                        }
                    });
                }
            }

            function getPromotionInfo(item) {
                var name = jq(item).attr('alt');
                var promotion = {
                    "name": name
                }
                return promotion;
            }

            function getProductInfo(item) {
                var name = jq('#productAnalytics #productName', item).text();
                var price = jq('#productAnalytics #productPrice', item).text();
                var category = jq('#productAnalytics #productCategory', item).text();
                var productSize = jq('#productAnalytics #productSize', item).text();
                var productShade = jq('#productAnalytics #productShade', item).text();
                var id = jq('#productAnalytics #productEAN', item).text();
                var product = {
                    "name": name,
                    "id": id,
                    "price": price,
                    "brand": "LP",
                    "category": category,
                    "dimension35": productSize,
                    "dimension36": productShade
                };
                return product;
            }

            function isInViewport(element) {
                var rect = element.getBoundingClientRect();
                var html = document.documentElement;
                return (
                    rect.top >= 0 &&
                        rect.left >= 0 &&
                        rect.bottom <= (window.innerHeight || html.clientHeight) &&
                        rect.right <= (window.innerWidth || html.clientWidth)
                );
            }

            /* Forms */
            /* in footer, call to action, quote, product header and product summary */
            jq('#page form[data-cta-type=salonLocator]').each(function () {
                var pageLocElt = jq(this).closest('[data-page-section]'); // find the nearest parent with a page section attribute
                var pageLocVal = pageLocElt.attr('data-page-section'); // store the value of the page section attribute
                jq(this).append('<input type="hidden" name="55event" value="salonLocator">');
                jq(this).append('<input type="hidden" name="55locationInPage" value="' + pageLocVal + '">');
            });

            /* Style my hair */
            var styleString = '55event=StyleMyHair&55locationInPage=';
            jq('#page a[data-cta-type=styleMyHair]').each(function () {
                var currentHref = jq(this).attr('href');
                var pageLocElt = jq(this).closest('[data-page-section]');
                var pageLocVal = pageLocElt.attr('data-page-section');
                jq(this).attr('href', currentHref + '?' + styleString + pageLocVal);
            });

            /* Magazine */
            var magString = '55event=ReadMagazine&55locationInPage=';
            jq('#page a[data-cta-type=magazine], .nav-main [data-cta-type=magazine] a').each(function () {
                var currentHref = jq(this).attr('href');
                if (currentHref != '#' && currentHref != '') {
                    var pageLocElt = jq(this).closest('[data-page-section]');
                    var pageLocVal = pageLocElt.attr('data-page-section');
                    jq(this).attr('href', currentHref + '?' + magString + pageLocVal);
                }
            });
            //general
            jq('[data-cta] a').each(function () {
                var locationParam = 'locationInPage=' + jq(this).closest('[data-page-section]').data('page-section');
                var href = jq(this).attr('href');
                if (href.indexOf('?') == -1) {
                    locationParam = '?' + locationParam;
                } else {
                    locationParam = '&' + locationParam;
                }
                jq(this).attr('href', href + locationParam);
            });
        });

    </script>
    <script src="/bundles/valtech-js?v=PGLX1-PPCSTx5LIG8VVNjs074PMyXp9WZmFSsv5Ri7E1"></script>

    

    
    
    
</body>
</html>